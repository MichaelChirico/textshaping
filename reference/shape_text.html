<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate glyph positions for strings — shape_text • textshaping</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate glyph positions for strings — shape_text" />
<meta property="og:description" content="
Do basic text shaping of strings. This function will use freetype to
calculate advances, doing kerning if possible. It will not perform any font
substitution or ligature resolving and will thus be much in line with how
the standard graphic devices does text shaping. Inputs are recycled to the
length of strings." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">textshaping</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/c_interface.html">textshaping C interface</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/textshaping/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate glyph positions for strings</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/textshaping/blob/master/R/shape_text.R'><code>R/shape_text.R</code></a></small>
    <div class="hidden name"><code>shape_text.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href='https://www.tidyverse.org/lifecycle/#experimental'><img src='figures/lifecycle-experimental.svg' alt='Experimental lifecycle'></a></p>
<p>Do basic text shaping of strings. This function will use freetype to
calculate advances, doing kerning if possible. It will not perform any font
substitution or ligature resolving and will thus be much in line with how
the standard graphic devices does text shaping. Inputs are recycled to the
length of <code>strings</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>shape_text</span><span class='op'>(</span>
  <span class='va'>strings</span>,
  id <span class='op'>=</span> <span class='cn'>NULL</span>,
  family <span class='op'>=</span> <span class='st'>""</span>,
  italic <span class='op'>=</span> <span class='cn'>FALSE</span>,
  bold <span class='op'>=</span> <span class='cn'>FALSE</span>,
  size <span class='op'>=</span> <span class='fl'>12</span>,
  res <span class='op'>=</span> <span class='fl'>72</span>,
  lineheight <span class='op'>=</span> <span class='fl'>1</span>,
  align <span class='op'>=</span> <span class='st'>"left"</span>,
  hjust <span class='op'>=</span> <span class='fl'>0</span>,
  vjust <span class='op'>=</span> <span class='fl'>0</span>,
  width <span class='op'>=</span> <span class='cn'>NA</span>,
  tracking <span class='op'>=</span> <span class='fl'>0</span>,
  indent <span class='op'>=</span> <span class='fl'>0</span>,
  hanging <span class='op'>=</span> <span class='fl'>0</span>,
  space_before <span class='op'>=</span> <span class='fl'>0</span>,
  space_after <span class='op'>=</span> <span class='fl'>0</span>,
  path <span class='op'>=</span> <span class='cn'>NULL</span>,
  index <span class='op'>=</span> <span class='fl'>0</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>strings</th>
      <td><p>A character vector of strings to shape</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>A vector grouping the strings together. If strings share an id the
shaping will continue between strings</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>The name of the font family</p></td>
    </tr>
    <tr>
      <th>italic</th>
      <td><p>logicals indicating the font style</p></td>
    </tr>
    <tr>
      <th>bold</th>
      <td><p>logicals indicating the font style</p></td>
    </tr>
    <tr>
      <th>size</th>
      <td><p>The pointsize of the font to use for size related measures</p></td>
    </tr>
    <tr>
      <th>res</th>
      <td><p>The ppi of the size related mesures</p></td>
    </tr>
    <tr>
      <th>lineheight</th>
      <td><p>A multiplier for the lineheight</p></td>
    </tr>
    <tr>
      <th>align</th>
      <td><p>Within text box alignment, either <code>'left'</code>, <code>'center'</code>, or
<code>'right'</code></p></td>
    </tr>
    <tr>
      <th>hjust, vjust</th>
      <td><p>The justification of the textbox surrounding the text</p></td>
    </tr>
    <tr>
      <th>width</th>
      <td><p>The requested with of the string in inches. Setting this to
something other than <code>NA</code> will turn on word wrapping.</p></td>
    </tr>
    <tr>
      <th>tracking</th>
      <td><p>Tracking of the glyphs (space adjustment) measured in 1/1000
em.</p></td>
    </tr>
    <tr>
      <th>indent</th>
      <td><p>The indent of the first line in a paragraph measured in inches.</p></td>
    </tr>
    <tr>
      <th>hanging</th>
      <td><p>The indent of the remaining lines in a paragraph measured in
inches.</p></td>
    </tr>
    <tr>
      <th>space_before, space_after</th>
      <td><p>The spacing above and below a paragraph,
measured in points</p></td>
    </tr>
    <tr>
      <th>path, index</th>
      <td><p>path an index of a font file to circumvent lookup based on
family and style</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with two element: <code>shape</code> contains the position of each glyph,
relative to the origin in the enclosing textbox. <code>metrics</code> contain metrics
about the full strings.</p>
<p><code>shape</code> is a data.frame with the following columns:</p><dl>
<dt>glyph</dt><dd><p>The glyph as a character</p></dd>
<dt>index</dt><dd><p>The index of the glyph in the font file</p></dd>
<dt>metric_id</dt><dd><p>The index of the string the glyph is part of (referencing a row in the <code>metrics</code> data.frame)</p></dd>
<dt>string_id</dt><dd><p>The index of the string the glyph came from (referencing an element in the <code>strings</code> input)</p></dd>
<dt>x_offset</dt><dd><p>The x offset in pixels from the origin of the textbox</p></dd>
<dt>y_offset</dt><dd><p>The y offset in pixels from the origin of the textbox</p></dd>
<dt>x_mid</dt><dd><p>The x offset in pixels to the middle of the glyph, measured from the origin of the glyph</p></dd>

</dl>

<p><code>metrics</code> is a data.frame with the following columns:</p><dl>
<dt>string</dt><dd><p>The text the string consist of</p></dd>
<dt>width</dt><dd><p>The width of the string</p></dd>
<dt>height</dt><dd><p>The height of the string</p></dd>
<dt>left_bearing</dt><dd><p>The distance from the left edge of the textbox and the leftmost glyph</p></dd>
<dt>right_bearing</dt><dd><p>The distance from the right edge of the textbox and the rightmost glyph</p></dd>
<dt>top_bearing</dt><dd><p>The distance from the top edge of the textbox and the topmost glyph</p></dd>
<dt>bottom_bearing</dt><dd><p>The distance from the bottom edge of the textbox and the bottommost glyph</p></dd>
<dt>left_border</dt><dd><p>The position of the leftmost edge of the textbox related to the origin</p></dd>
<dt>top_border</dt><dd><p>The position of the topmost edge of the textbox related to the origin</p></dd>
<dt>pen_x</dt><dd><p>The horizontal position of the next glyph after the string</p></dd>
<dt>pen_y</dt><dd><p>The vertical position of the next glyph after the string</p></dd>

</dl>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>string</span> <span class='op'>&lt;-</span> <span class='st'>"This is a long string\nLook; It spans multiple lines\nand all"</span>

<span class='co'># Shape with default settings</span>
<span class='fu'>shape_text</span><span class='op'>(</span><span class='va'>string</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $shape
#&gt; <span style='color: #949494;'># A tibble: 59 x 7</span><span>
#&gt;    glyph index metric_id string_id x_offset y_offset x_midpoint
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span>     0    55         1         1     0          24       3.66
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span>     1    75         1         1     7.33       24       3.33
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span>     2    76         1         1    14          24       1.33
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span>     3    86         1         1    16.7        24       3   
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span>     4     3         1         1    22.7        24       1.66
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span>     5    76         1         1    26          24       1.33
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span>     6    86         1         1    28.7        24       3   
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span>     7     3         1         1    34.7        24       1.66
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span>     8    68         1         1    38          24       3.33
#&gt; </span><span style='color: #BCBCBC;'>10</span><span>     9     3         1         1    44.7        24       1.66
#&gt; </span><span style='color: #949494;'># … with 49 more rows</span><span>
#&gt; 
#&gt; $metrics
#&gt; </span><span style='color: #949494;'># A tibble: 1 x 11</span><span>
#&gt;   string      width height left_bearing right_bearing top_bearing bottom_bearing
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>        </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>         </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> </span><span style='color: #949494;'>"</span><span>This is a…  147.   45.2        0.188         0.438       0.594           2.55
#&gt; </span><span style='color: #949494;'># … with 4 more variables: left_border &lt;dbl&gt;, top_border &lt;dbl&gt;, pen_x &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   pen_y &lt;dbl&gt;</span><span>
#&gt; </div><div class='input'>
<span class='co'># Mix styles within the same string</span>
<span class='va'>string</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='st'>"This string will have\na "</span>,
  <span class='st'>"very large"</span>,
  <span class='st'>" text style\nin the middle"</span>
<span class='op'>)</span>

<span class='fu'>shape_text</span><span class='op'>(</span><span class='va'>string</span>, id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>12</span>, <span class='fl'>24</span>, <span class='fl'>12</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $shape
#&gt; </span><span style='color: #949494;'># A tibble: 59 x 7</span><span>
#&gt;    glyph index metric_id string_id x_offset y_offset x_midpoint
#&gt;    </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'> 1</span><span>     0    55         1         1     0          36       3.66
#&gt; </span><span style='color: #BCBCBC;'> 2</span><span>     1    75         1         1     7.33       36       3.33
#&gt; </span><span style='color: #BCBCBC;'> 3</span><span>     2    76         1         1    14          36       1.33
#&gt; </span><span style='color: #BCBCBC;'> 4</span><span>     3    86         1         1    16.7        36       3   
#&gt; </span><span style='color: #BCBCBC;'> 5</span><span>     4     3         1         1    22.7        36       1.66
#&gt; </span><span style='color: #BCBCBC;'> 6</span><span>     5    86         1         1    26          36       3   
#&gt; </span><span style='color: #BCBCBC;'> 7</span><span>     6    87         1         1    32          36       1.66
#&gt; </span><span style='color: #BCBCBC;'> 8</span><span>     7    85         1         1    35.3        36       2   
#&gt; </span><span style='color: #BCBCBC;'> 9</span><span>     8    76         1         1    39.3        36       1.33
#&gt; </span><span style='color: #BCBCBC;'>10</span><span>     9    81         1         1    42          36       3.33
#&gt; </span><span style='color: #949494;'># … with 49 more rows</span><span>
#&gt; 
#&gt; $metrics
#&gt; </span><span style='color: #949494;'># A tibble: 1 x 11</span><span>
#&gt;   string      width height left_bearing right_bearing top_bearing bottom_bearing
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>        </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>         </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>       </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>          </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> </span><span style='color: #949494;'>"</span><span>This stri…  166.   57.2        0.188         0.516       0.594           2.55
#&gt; </span><span style='color: #949494;'># … with 4 more variables: left_border &lt;dbl&gt;, top_border &lt;dbl&gt;, pen_x &lt;dbl&gt;,</span><span>
#&gt; </span><span style='color: #949494;'>#   pen_y &lt;dbl&gt;</span><span>
#&gt; </div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Thomas Lin Pedersen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


